# ナレッジチャットシステム

INBOXのアポメモを自動的にタグ付けし、業界別・能力開発テーマ別にナレッジ化するシステムです。LLM完全信頼型の対話式検索機能を搭載しています。

## 🎯 概要

法人営業が顧客からヒアリングした情報を、研修やアセスメントに活用できるよう、ナレッジとして体系化するシステムです。LLMによる自然言語での対話を通じて、関連性の高いナレッジファイルを検索・表示できます。

### 主な機能

1. **INBOX監視**: 新規ファイルの自動検出
2. **自動タグ付け**: 業界・テーマ・課題・施策の自動抽出
3. **ナレッジ生成**: 業界別・能力開発テーマ別のナレッジファイル作成
4. **LLM完全信頼型チャット**: 自然言語での対話によるナレッジ検索
5. **フォールバック機能**: LLMエラー時のキーワードベース検索

## 🚀 最新機能: LLM完全信頼型チャットシステム

### 特徴
- **LLM完全信頼**: 曖昧性検出、キーワード生成、検索戦略をLLMに完全委任
- **自然な対話**: 固定パターンや強制的な質問回数制限なし
- **フォールバック機能**: LLMが応答しない場合のキーワードベース検索
- **正確性重視**: 実際の状況を正確に反映、嘘のメッセージなし

### セットアップ

1. **バックエンド起動**
```bash
cd backend
python3 main_simple.py
```

2. **フロントエンド起動**
```bash
open FRONTEND/index.html
```

3. **Ollama設定** (LLM使用時)
```bash
# Ollamaのインストールとモデルダウンロード
ollama pull qwen2.5:7b
```

## 📁 プロジェクト構造

```
Obsidian Vault/
├── INBOX/                    # アポメモの入力フォルダ
├── KNOWLEDGE/                # 生成されたナレッジファイル
│   ├── 業界別/
│   └── 能力開発テーマ/
├── FRONTEND/                 # チャットUI
│   └── index.html
├── backend/                  # FastAPIバックエンド
│   └── main_simple.py
├── PROCESSING/               # 処理中・完了ファイル
├── ナレッジ階層化_自動化スクリプト.py  # メインスクリプト
├── tag_config.json          # タグ設定ファイル
└── 要件定義書_意図特定機能.md  # システム仕様書
```

## 🚀 セットアップ

### 前提条件

- Python 3.7以上
- Obsidian Vault
- Ollama (LLM使用時)

### インストール

1. リポジトリをクローン
```bash
git clone https://github.com/SATONODOKA/shib-rain.git
cd shib-rain
```

2. ナレッジ階層化スクリプトを実行
```bash
python3 ナレッジ階層化_自動化スクリプト.py
```

3. バックエンドを起動
```bash
cd backend
python3 main_simple.py
```

4. フロントエンドを開く
```bash
open FRONTEND/index.html
```

## 📋 使用方法

### 1. INBOXにメモを追加

INBOXフォルダにアポメモを追加すると、自動的にタグ付けされます。

### 2. ナレッジファイルの生成

スクリプトを実行すると、以下の階層でナレッジファイルが生成されます：

- **業界別**: 業界一般、バリューチェーン別
- **能力開発テーマ別**: テーマ×業界

### 3. チャットでの検索

フロントエンドで自然言語で質問を入力すると、LLMが対話を通じてユーザーの意図を理解し、関連性の高いナレッジファイルを検索・表示します。

#### 使用例
- 「中堅層の離職について知りたい」
- 「IT業界の組織風土改革の事例を教えて」
- 「女性活躍の取り組みについて詳しく」

## 🏷️ タグ体系

### 業界
- 建設業界、製造業、IT業界、金融業界、サービス業、小売業、医療業界、教育業界、運輸業界

### 能力開発テーマ
- 組織風土改革、女性活躍、働き方改革、採用戦略、人材育成、評価制度、コミュニケーション、意思決定、プロジェクト管理、リーダーシップ、コーチング、若手の自立、エンゲージメント、コンサル

### バリューチェーン
- 現場職人、現場監督、設計者、デベロッパー、コンサルタント、管理職、経営層

### 問題・課題
- 人材不足、長時間労働、離職率、コミュニケーション不足、意思決定遅延、現場と本社の乖離、世代間ギャップ、女性参入障壁

### 施策・打ち手
- フレックスタイム、リモートワーク、メンター制度、評価制度改革、研修プログラム、組織開発、ICT活用、プロセス改善、組織再編、環境整備

### 結果
- 成功事例、失敗事例、効果測定済み、継続中、中止、他社展開済み

## 🔧 カスタマイズ

### タグの追加

`tag_config.json`を編集するか、スクリプト内の`add_tag_rule()`メソッドを使用：

```python
system.add_tag_rule('業界', '新しい業界', ['キーワード1', 'キーワード2'])
```

### ナレッジテンプレートの変更

`create_knowledge_content()`メソッド内のテンプレートを編集してください。

### LLMプロンプトの調整

`backend/main_simple.py`内のプロンプトを編集して、LLMの動作を調整できます。

## 📊 グランドルール

1. **引用元の明示**: ナレッジファイルには必ずINBOXの元ファイルへのリンクを記載
2. **タグ体系の拡張性**: 外部ファイルで管理し、現場の変化に柔軟に対応
3. **ナレッジの厚み**: INBOXの素材が増えるほど自動的に充実・多層化
4. **参照・連絡フロー**: ナレッジページで全体像を掴み、詳細は引用元や担当者にアクセス
5. **LLM完全信頼**: 曖昧性検出とキーワード生成はLLMに完全委任

## 🤝 貢献

1. このリポジトリをフォーク
2. 機能ブランチを作成 (`git checkout -b feature/amazing-feature`)
3. 変更をコミット (`git commit -m 'Add some amazing feature'`)
4. ブランチにプッシュ (`git push origin feature/amazing-feature`)
5. プルリクエストを作成

## 📄 ライセンス

このプロジェクトはMITライセンスの下で公開されています。

## 📞 サポート

質問や問題がある場合は、GitHubのIssuesページでお知らせください。 